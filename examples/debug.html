<!doctype html>
<html>
  <head>
    <title>Debug Example</title>
    <style>
      textarea {
        height: 300px;
      }
      pre {
        min-height: 50px;
        max-height: 400px;
        overflow-y: scroll;
        border: 1px solid black;
        white-space: pre-wrap;
      }

      #html-input {
        white-space: pre;
      }
    </style>
  </head>
  <body>
    <h1>Debug Example</h1>

    <h2>Input</h2>
    <textarea rows=20 cols=60 placeholder="paste into here"></textarea>

    <h2>Data from last paste</h2>

    <h3>HTML Input</h3>
    <pre id="html-input"></pre>

    <h3>Govspeak</h3>
    <pre id="govspeak"></pre>

    <script src="../dist/paste-html-to-markdown.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.9.0/beautify-html.js"></script>
    <script>
      var textarea = document.querySelector('textarea')
      var htmlInputElement = document.getElementById('html-input')
      var govspeakElement = document.getElementById('govspeak')

      textarea.addEventListener('paste', function () {
        govspeakElement.textContent = ''
      })

      textarea.addEventListener('paste', window.pasteHtmlToGovspeak)

      textarea.addEventListener('htmlinput', function (e) {
        if (e.detail) {
          htmlInputElement.textContent = prettyHtml(e.detail)
        } else {
          htmlInputElement.textContent = 'HTML was not pasted'
        }
      })

      textarea.addEventListener('govspeak', function (e) {
        govspeakElement.textContent = e.detail
      })

      function prettyHtml (html) {
        try {
          return window.html_beautify(html, {
            indent_size: 2,
            wrap_line_length: 160,
            wrap_attributes: 'force-expand-multiline'
          })
        } catch {
          return html
        }
      }
    </script>
  </body>
</html>
